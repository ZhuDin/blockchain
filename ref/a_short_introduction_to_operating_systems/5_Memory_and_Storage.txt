Chapter 5

Memory and Storage

Together with the CPU, the physical memory (RAM) is the most important
resource a computer has. The CPU chip has instructions to manipulate data
only directly in memory, so all arithemtic and logic operations must take 
place in RAM


5.1 Logical and Physical Memory

5.1.1 Physical Address space

Every byte in the memory has an address which ranges from zero up to a limit
which is determined by the hardware (see below). Although bytes are numbered 
from zero upward, not every address is necessarily wired up to a memory chip.
Some addresses may be reserved for

  * Memory mapped I/O - individual registers belonging to other chips and 
    hardware devices.

  * The interrupt vector - the CPU itself requires some workspace. Usually
    the interrupt vector and sometimes the processor stack occupy fixed locations.

  * The operating system itself. This takes up a fair chunk of memory. On most
    microcomputers this is located in ROM. On multiuser systems upgrades are 
    much more frequent and it is always loaded from disk into RAM.

The physicala address space consists of every possible address to which memory
chips are connected.


5.1.2 Word size

A word is a small unit of memory, normally just a few bytes. The size of a 
word on any system is defined by the size of the registers in the CPU. This
determines both the amount of memory a system can address and the way in 
which memory is used. 

Up to about 1985, all CPUs had eight bit (1 byte) register, except for the
program counter and address registers which were 16 bits. The largest address
which can be represented in a 16 bit number is 2^16 = 65,535 or 64k bytes, and
so these machine could not handle more memory than this. Similarly, since
the accumulator and index registers were all 8 bits wide, no more than one byte
could be manipulated at a time. (This is why bytes have a special status.)

After that came a number of 16 bit processors with larger program counters.
Nowadays most CPUs have 32 bit registers. The DEC alpha machines, 
together with the OSF/1 operating system are based on 64 bit technology. The
possible address range and internal number representations are enormous. 64
bit versions of other versions of unix and NT are also starting to appear.


5.1.3 Paged RAM/ROM 

The size of the physical address space is limited by the size of the address
registers in the CPU. On early machines this memory was soon exceeded and it
was necessary to resort to tricks to add more memory. Since it was not possible
to address any more than the limit, these machines temporarily switched out
one bank of memory with another. The new memory bank used the same
addresses as the old, but only one could be accessed at a time. This operation
is called paging. A special hardware paging chip was used to switch between
banks, containing a register which could choose between N banks of memory.

Paging has obvious disadvantages - not all memory can be used at once and
the method is seldom used nowadays since modern CPUs can address much
larger memory spaces. As we shall see later, multi-user systems use paging to
disk. Instead of switching between hardware banks of memeory, they copy the
old contents to disk and reuse the memory which is already there for something
else.


5.1.4 Address binding - coexistence in memory



